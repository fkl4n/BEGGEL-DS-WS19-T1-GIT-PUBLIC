---
title: "CSVFileImport"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
?plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

# Load Libraries
```{r,  warning=FALSE,include= TRUE,echo=TRUE,results='hide', message=FALSE}
#install.packages("dplyr")
#install.packages("stringr")
install.packages(graphics)

# load installed libraries 
library(dplyr)
library(stringr)
library(graphics)

```

```{r}
setwd("D:/HS/DS/BEGGEL-DS-WS19-T1-GIT/")
```

# Load Data
```{r}
db_urls = read.csv('../data/database_list.csv', header=TRUE, encoding = "UTF-8", na.strings = "null")
db_infos = read.csv('../DBEngines/DBRanking.csv', header=TRUE, encoding = "UTF-8", na.strings = "null") 

```

# Create Base-Dataframe
```{r}
# get the names of the preselected DBs
names = as.vector(db_urls$URLName)  

# select preselected entries 
selected_rows = db_infos[tolower(db_infos$URLName) %in% tolower(names), ]

# remove "Rank"-column
tmp_df = db_urls[,!(names(db_urls) %in% c("Rank"))]

# create a dataframe with information about the preselected DBs
base_df =  right_join(selected_rows, tmp_df, by = "URLName")

```

# Examine Dataframe
```{r}
# head(base_df)

```


```{r}
# str(base_df)

```


```{r}
# summary(base_df)

```

# Cleaning and Prepping Data
```{r}
# Remove unneccesary columns
drop_list = c("Name", "Ausschlie√ülich.ein.Cloud.Service", "DBaaS.Angebote", "Anmerkung")
result_df = base_df[ , !(names(base_df) %in% drop_list)]
```

```{r}
# str(result_df)

```


```{r}
# check the values class
# lapply(result_df$Rang, class)

# The following variables were imported as factors, but they should be numerical 
columns_to_numeric = c("Punkte", "Rang", "Suchmaschinen","Erscheinungsjahr", 
                       "Graph.DBMS", "Document.Stores", "Key.Value.Stores", "Relational.DBMS",
                       "Time.Series.DBMS", "Multivalue.DBMS", "Object.oriented.DBMS", "RDF.Stores", 
                       "Wide.Column.Stores", "Navigational.DBMS", "Event.Stores", "Native.XML.DBMS",
                       "Content.Stores")
result_df[columns_to_numeric] = lapply(result_df[columns_to_numeric], as.numeric)

# The following variables were imported as factors, but they should be characters
columons_to_chr = c("Kurzbeschreibung", "Website", "Technische.Dokumentation", "Entwickler",
                    "Aktuelle.Version", "Server.Betriebssysteme", "Git_URL")
result_df[columons_to_chr] = lapply(result_df[columons_to_chr], as.character)


#str(result_df)

```

```{r}
plot(result_df$Punkte~result_df$Rang, type = "p", pch =19, main = "Points in dependence of the Rank", xlab="Rank", ylab="Points")

```

```{r}
cor(result_df[ , c( "Punkte", "Rang")], use="complete")
```

```{r}
db_df = data.frame(
  names1 = c("MySql","PostgreSQL", "MongoDB", "ElasticSearch", "Redis"),
  ranking = c(2, 4, 5, 7, 8),
  commits = c(152906, 48124, 49221, 49375, 8631),
  contributers= c(72, 33, 393, 1310, 319)
)

cor(db_df[ , c("ranking", "commits", "contributers")], use="complete")

```

```{r}
# the negative correlation of ranking-commits is justified by the inversely proportional value of the rank to the rank itself
# the lesser the rank, the higher it's value

```


```{r}
color = c("red", "blue", "green", "orange", "black")

plot(db_df$ranking~db_df$commits, type = "p", pch =19, main = "Ranking in dependence of Commits", col= color, ylim = rev(range(db_df$ranking)), xlab="Commits", ylab="Rank")

legend("bottomright", legend = db_df$names1, col = color, lty=1, cex=0.8)

```
